<!DOCTYPE HTML>
<html>

<head>
  <title>eNGE</title>
  <link rel="stylesheet" type="text/css" href="index-webgl2.css">

  <script type="text/javascript" src="base64.js"></script>
  <script type="text/javascript" src="trace.js"></script>
  <script type="text/javascript" src="utils.js"></script>

  <script type="text/javascript" src="psx-core/core.js"></script>
  <script type="text/javascript" src="psx-core/config.js"></script>

  <script type="text/javascript" src="psx-renderers/webgl2-utils.js"></script>
  <script type="text/javascript" src="psx-renderers/webGl2HQ.js"></script>

  <script type="text/javascript" src="psx-core/memory.js"></script>
  <script type="text/javascript" src="psx-core/enge.js"></script>
  <script type="text/javascript" src="psx-core/cdrom.js"></script>
  <script type="text/javascript" src="psx-core/recompiler.js"></script>
  <script type="text/javascript" src="psx-core/directMemoryAccess.js"></script>
  <script type="text/javascript" src="psx-core/geometryTransformEngine.js"></script>
  <script type="text/javascript" src="psx-core/graphicsProcessingUnit.js"></script>
  <script type="text/javascript" src="psx-core/macroBlockDecoder.js"></script>
  <script type="text/javascript" src="psx-core/serialPorts.js"></script>
  <script type="text/javascript" src="psx-core/soundProcessingUnit.js"></script>
  <script type="text/javascript" src="psx-core/rootCounters.js"></script>
  <script type="text/javascript" src="psx-core/gamepad.js"></script>

  <script type="text/javascript" src="index.js"></script>

  <script id="pixel" type="x-shader/x-vertex">#version 300 es
    precision highp float;
    precision highp int;

    out vec3 v_position;
    out vec4 v_color;

    in vec3 a_position;
    in vec4 a_color;

    void main() {
      gl_Position = vec4(a_position, 1.0);
      gl_Position.x = (gl_Position.x - 512.0) / +512.0;
      gl_Position.y = (gl_Position.y - 256.0) / +256.0;
      v_position = a_position;
      v_color = a_color;
    }
  </script>

  <script id="vram-direct" type="x-shader/x-fragment">#version 300 es
    precision highp float;
    precision highp int;

    uniform sampler2D u_texture;

    layout(location = 0) out vec4 outColor;

    in vec3 v_position;
    in vec4 v_color;

    void main() {
      vec4 tex = texelFetch(u_texture, ivec2(int(v_position.x) % 4096, int(v_position.y) % 2048), 0);
      outColor = tex;
    }
  </script>

</head>

<body onload="init();">
  <canvas id="ambilight"></canvas>
  <div id="background"></div>
  <canvas id="display"></canvas>
  <!-- <div id="menu"></div> -->
</body>

</html>